<?xml version="1.0" encoding="UTF-8"?>

<configuration>

 <!-- 일반로그 경로 및 출력패턴적용-->
  <property name="LOGS_ABSOLUTE_PATH" value="./logs"/>  
  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <layout class="ch.qos.logback.classic.PatternLayout">
      <Pattern>[%d{yyyy-MM-dd HH:mm:ss}:%-3relative][%thread] %-5level %logger{36} - %msg%n</Pattern>
    </layout>
  </appender>
 
 <!-- 디버그로그 경로 및 출력패턴적용--> 
  <appender name="DEBUG_LOG" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>./logs/DEBUG.log</file>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>DEBUG</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
    <encoder>
      <pattern>[%d{yyyy-MM-dd HH:mm:ss}:%-3relative][%thread] %-5level %logger{35} - %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <fileNamePattern>./was-logs/DEBUG.%d{yyyy-MM-dd}.%i.log.gz</fileNamePattern>
      <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
        <maxFileSize>100MB</maxFileSize>
      </timeBasedFileNamingAndTriggeringPolicy>
      <maxHistory>180</maxHistory>
    </rollingPolicy>
  </appender>
  
  <!-- 경고로그 경로 및 출력패턴적용-->
  <appender name="WARN_LOG" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>./logs/warn.log</file>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>WARN</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
    <encoder>
      <pattern>[%d{yyyy-MM-dd HH:mm:ss}:%-3relative][%thread] %-5level %logger{35} - %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <fileNamePattern>./was-logs/warn.%d{yyyy-MM-dd}.%i.log.gz</fileNamePattern>
      <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
        <maxFileSize>100MB</maxFileSize>
      </timeBasedFileNamingAndTriggeringPolicy>
      <maxHistory>180</maxHistory>
    </rollingPolicy>
  </appender>
  
  
  <logger name="LogController" additivity="false">
    <level value = "DEBUG" />
    <appender-ref ref="DEBUG_LOG" />
    <appender-ref ref="WARN_LOG" />
  </logger>
  
  <include resource="org/springframework/boot/logging/logback/base.xml"/>
  
  <!-- 쿼리정렬 출력-->
    <logger name="jdbc" level="OFF"/>
    <logger name="jdbc.connection" level="OFF"/>
    <logger name="jdbc.sqlonly" level="OFF"/>  <!-- 파라미터를 셋팅해서 출력-->
    <logger name="jdbc.sqltiming" level="DEBUG"/>  <!--쿼리 실행 속도 표시-->
    <logger name="jdbc.resultsettable" level="OFF"/>  <!-- 결과값을 보여줌-->
    <logger name="log4jdbc.debug" level="OFF"/>
    <logger name="jdbc.audit" level="OFF"/>
    <logger name="jdbc.resultset" level="OFF"/>
    
	<!-- 쿼리정렬 출력-->    
    <root level="INFO">
        <appender-ref ref="STDOUT"/>
    </root>
</configuration>